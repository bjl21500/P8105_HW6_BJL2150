P8105\_HW6\_BJL2150
================
Briana Lettsome
November 16, 2018

Problem 1
=========

``` r
# Reading in the homicide data set
homicide_data = read_csv("./homicidedata.csv", na = c("", "NA", "Unknown")) 
```

    ## Parsed with column specification:
    ## cols(
    ##   uid = col_character(),
    ##   reported_date = col_integer(),
    ##   victim_last = col_character(),
    ##   victim_first = col_character(),
    ##   victim_race = col_character(),
    ##   victim_age = col_integer(),
    ##   victim_sex = col_character(),
    ##   city = col_character(),
    ##   state = col_character(),
    ##   lat = col_double(),
    ##   lon = col_double(),
    ##   disposition = col_character()
    ## )

read\_csv(file = "./homicidedata.csv")

### Description of the homicide dataset:

The homicide\_data provides information on the numbers of homicides committed within fifty large U.S. cities. Within the dataset, the observations included are the vitcims' first and last name, age, race, city and state that the event transpired in as well as the disposition. The disposition in this context refers to the result of the homicide event. In other words, was the case closed, an arrest made, unsolved, et cetera.

``` r
# Making of the new variable 'city_state'. Also, created a binary variable from disposition and named this new observation 'solved'. Where 1 = "Closed by arrest" and = "Open/ no arrest" and "Closed withou arrest".

# Using this dataframe to count how many states are in the original dataset prior to filtering out the 4 city_state observations. 

two_homicide_citystate = homicide_data %>%
  mutate(city_state = str_c(city, ", " , state)) %>%
  mutate(solved = as.numeric(disposition == "Closed by arrest")) %>% 
  count(city_state)  

# This is the working dataframe where the 4 cities were filtered out successfully. The 

homicide_citystate = homicide_data %>%
  mutate(city_state = str_c(city, ", " , state)) %>% 
  mutate(solved = as.numeric(disposition == "Closed by arrest")) %>% 
  filter(!city_state %in% c("Dallas, TX", "Phoenix, AZ", "Kansas City, MO", "Tulsa, AL")) %>%
  select(city_state, victim_race, solved, victim_age, victim_sex, disposition) %>%
  mutate(race = case_when(victim_race == "White" ~ "white",
                          victim_race != "White" ~ "non-white")) %>%
  mutate(victim_age = as.numeric(victim_age)) %>%
  mutate(race = fct_relevel(race, "white")) %>%
  filter(race != "" & victim_age != "")


hw6_homicide_citystate = homicide_citystate %>%
  group_by(city_state) %>%
  summarize(total_disposition = n(),
            hom_solved = sum (solved == "1"))
```

hom\_unsolved = sum(resolution == "unsolved"))

``` r
baltimore = homicide_citystate %>%
  filter(city_state == "Baltimore, MD")

## Using the 'glm' function

logistic_homicide = glm(solved ~ victim_age + race + victim_sex, data = baltimore, family = binomial()) %>%
  broom::tidy() 
```

logistic\_city = homicide\_citystate %&gt;% mutate(new = map(.x = homicide\_citystate, ~ glm(solved ~ victim\_age + race + victim\_sex, data = .x, family = binomial)))

log\_regress = function(log){glm(solved ~ victim\_age + race + victim\_sex, data = .x, family = binomial)}

logistic\_city = homicide\_citystate %&gt;% mutate(new = map(homicide\_citystate, log\_regress))

    %>%
      confint.default(object = estimate)
      mutate(OR = exp(estimate)) %>%
      
      data_frame(formulas) %>%
        mutate(mod = map(formulas, 
                          ~  glm(as.formula(.),
                                 family = 'binomial', data = mtcars)))
                                 
     my_lm <- function(df){
        lm(Count ~ Moisture, data = df)
    }

%&gt;% confint.default(estimate)


      prop.test(x = )
      mutate(new = map2(.x = estimate, .y = , ~prop.test(x = .x, n = .y)),
             tidy_tests = map(prop_tests, broom::tidy)) 

``` r
# Trying something out

twohw6_homicide_citystate = homicide_data %>%
mutate(city_state = str_c(city, ", " ,state)) %>%
mutate(solved = as.numeric(disposition == "Closed by arrest"))
```

filter(!city\_state %in% c("Dallas, TX", "Phoenix, AZ", "Kansas City, MO", "Tulsa, AL")) %&gt;% select(city\_state, victim\_race, outcome, victim\_age, victim\_sex) %&gt;% mutate(race = case\_when(victim\_race == "White" ~ "white", victim\_race != "White" ~ "non-white")) %&gt;% mutate(victim\_age = as.numeric(victim\_age)) %&gt;% filter(race != "" & victim\_age != "")

%&gt;% filter(!city\_state %in% c("Dallas, TX", "Phoenix, AZ", "Kansas City, MO", "Tulsa, AL")) %&gt;% select(city\_state, victim\_race, solved, victim\_age)

resolution = case\_when( disposition == "Closed without arrest" ~ "unsolved", disposition == "Open/No arrest" ~ "unsolved", disposition == "Closed by arrest" ~ "solved" )

%&gt;% mutate(race = (victim\_race == "White"))

unique(homicide\_citystate$city\_state)

Used this function to determine th unique observations within 'disposition'.
============================================================================

unique(homicide\_citystate$disposition)

Problem 2
=========

``` r
# Reading in of birthweight dataset and removing ony observations that are missing, NA or Unknown.

birthweight_data = read_csv("./birthweight.csv", na = c("", "NA", "Unknown")) 
```

    ## Parsed with column specification:
    ## cols(
    ##   .default = col_integer(),
    ##   gaweeks = col_double(),
    ##   ppbmi = col_double(),
    ##   smoken = col_double()
    ## )

    ## See spec(...) for full column specifications.

``` r
birthweight_clean = birthweight_data %>%
  select(bwt, momage, mrace, smoken, babysex, bhead, blength, gaweeks) 

bw_linear_one = lm(bwt ~ momage + mrace + smoken, data = birthweight_clean)

bw_linear_one %>%
  broom::tidy()
```

    ## # A tibble: 4 x 5
    ##   term        estimate std.error statistic  p.value
    ##   <chr>          <dbl>     <dbl>     <dbl>    <dbl>
    ## 1 (Intercept)  3110.       47.5      65.5  0.      
    ## 2 momage         13.3       1.98      6.70 2.42e-11
    ## 3 mrace        -141.       10.2     -13.8  1.53e-42
    ## 4 smoken         -8.64      1.04     -8.34 9.58e-17
